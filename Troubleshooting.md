#This page gives help to common problems with lumikki and labview

# Dividing the problem #

## 1. check labview web server ##

Labview takes http-get as inputs. Start the labview servers and try the following web adresses (3 different) by inputting them address line (with linux-firefox):

```
10.0.0.10:3363/ttm/ttm_status
10.0.0.20:3363/cam/cam_status
10.0.0.40:80/ae/ae_status
```

If you get a responce like:
```
{"statusText":"Ready to measure","status":210}
```
it means that labview webserver is running and registering the commands.

If you don't get this responce and get something like "page not found" or "access denied", it means that the problem is with your network or labview webserver.

The above addresses are composed as follows:

```
ip_address_of_the_machine:labview_webserver_port/labview_project_name/vi_name
```

**how to get the variables mentioned above**

ip\_address\_of\_the\_machine: open terminal (**start->run** and type **cmd**) and type "ipconfig". Look for line ipv4 config.

labview\_webserver\_port: open labview project and go to in project explorer (= the default tree view) **tools->options->webserver** and look for "serverlabels (ports)". The port is in brackets.

labview\_project\_name: In labview project tree go to: **build specifications->YOURBUILDNAME->second click->properties->information** and look for service name. YOURBUILDNAME is the name of your build, usually its lumikki, cam, ttm or ae.

vi\_name: In labview project tree go to: **build specifications->YOURBUILDNAME->second click->properties->Source Files** and **build specifications->YOURBUILDNAME->second click->properties->URL Mappings**. Search for "service VIs" and URL mappings. Usually the vi\_name is the filename of the VI without the extension: ".vi".

## 2. Network is not correct ##

Try to ping every machine from every other machine. If the machine does not respond to ping call IT-support.

Correct behavior (machine 10.0.0.10 responds):
```
> ping 10.0.0.10
PING 10.0.0.10 (10.0.0.10) 56(84) bytes of data.
64 bytes from 10.0.0.10: icmp_req=1 ttl=128 time=0.332 ms
64 bytes from 10.0.0.10: icmp_req=2 ttl=128 time=190 ms
64 bytes from 10.0.0.10: icmp_req=3 ttl=128 time=0.160 ms
^C
--- 10.0.0.10 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2000ms
rtt min/avg/max/mdev = 0.160/63.765/190.803/89.829 ms
```

Incorrect behavior (machine 10.0.0.11 does not respond):
```
> ping 10.0.0.11
PING 10.0.0.11 (10.0.0.11) 56(84) bytes of data.
From 10.0.0.1 icmp_seq=1 Destination Host Unreachable
From 10.0.0.1 icmp_seq=2 Destination Host Unreachable
From 10.0.0.1 icmp_seq=3 Destination Host Unreachable
^C
--- 10.0.0.11 ping statistics ---
5 packets transmitted, 0 received, +3 errors, 100% packet loss, time 4024ms
pipe 3
```

## 3. Check if lumikki prints the correct address ##

When you press "start" the lumikki shows the http-get command in terminal (the one that you used for launching "./userserver.bash"). Copy this command to address bar of a web browser. Check that the address is correct (see case 1.)

In excample the camera starts with command:

```
http://10.0.0.40:80/ae/ae_start?stopCollection=0&stopClock=0&startClock=1&ClockFrequency=2000000&filename=default-201402101744&startCollection=1
```

The beginning is the same as in case 1. After the "?" mark are the parameters. These parameters correspond to the variables in "ae\_start.vi" that are wired to the connector pane in VI front panel. Names are case sensitive and have to be exactly the same as in labview front panel.

If you cannot launch the VI from browser, The VI and labview project is broken **or** the address is wrong. Decide which one is correct and either fix the labview or lumikki. The address is generated by lumikki (so if it is wrong fix lumikki otherwise labview).

## Detailed deeper troubleshooting ##

**2011-03-19 15:07:47: (plugin.c.169) dlopen() failed for: /prefix/directory/lib/mod\_indexfile.so**

**/prefix/directory/lib/mod\_indexfile.so: cannot open shared object file: No such file or directory**

**2011-03-19 15:07:47: (server.c.650) loading plugins finally failed**

The plugin library is wrong. Tell lighttpd where mod\_indexfile.so is. A quick fix is to add "-m /path/to/lib" after "lighttpd -f conf/lighttpd.conf -D" in runuserserver.bash. Runuserserver.bash should look like (my prefix directory is /home/jko/usr/):

```
. lumikki.env
memcached&
lighttpd -f conf/lighttpd.conf -D -m /home/jko/usr/lib
```

Longer fix is to reinstall lighttpd with correct prefix. Remove the lighttpd-1.4.28.tar.bz2 and lighttpd-1.4.28 directory and download the stuff again. Then do bullet **lighthttpd** above again. Removing the stuff makes sure that there is no old configurations left behind.

**failed to listen on TCP port 11211: Address already in use**

Your memcached default port is reserved. Someone else is using it. Most likely other memcached. Kill it with 'killall memcached'. If this does not work, you either have to free the port or use alternative port. To use alternative port you have to replace 11211 with the new port number (between 10000 - 50000) in the following line in 'webroot/cmd/config.py':

```
self.mc = memcache.Client(['127.0.0.1:11211'], debug=0)
```

and change 'memcached&' in runserver.bash and runuserserver.bash:

```
memcached -p NEWPORT &
```
where NEWPORT is the new port number.

Used ports can be seen with 'netstat -tap' (third column, after :).

**memcached**

You can test memcached with the following commands (text after > is what you type). Before and after running the test, kill existing memcached with 'killall memcached'.

```
> memcached &
> telnet localhost 11211
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
> get greeting
END
> set greeting 1 0 11
> Hello World
STORED
> get greeting           
VALUE greeting 1 11
Hello World
END
> quit
```